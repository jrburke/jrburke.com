<!DOCTYPE html>
<html>
<head>
    <title>James Burke</title>
    <link href="http://jrburke.com/atom.xml" type="application/atom+xml" rel="alternate" title="ATOM Feed" />
<meta name="viewport" content="width=device-width, initial-scale=1">

<link href="./img/favicon.png" rel="icon">
<link href="./css/index.css" rel="stylesheet" type="text/css">

<script src="./js/index.js"></script>
<script type="text/javascript">
  (function() {
    var config = {
      kitId: 'mun6ekq',
      scriptTimeout: 3000
    };
    var h=document.getElementsByTagName("html")[0];h.className+=" wf-loading";var t=setTimeout(function(){h.className=h.className.replace(/(\s|^)wf-loading(\s|$)/g," ");h.className+=" wf-inactive"},config.scriptTimeout);var tk=document.createElement("script"),d=false;tk.src='//use.typekit.net/'+config.kitId+'.js';tk.type="text/javascript";tk.async="true";tk.onload=tk.onreadystatechange=function(){var a=this.readyState;if(d||a&&a!="complete"&&a!="loaded")return;d=true;clearTimeout(t);try{Typekit.load(config)}catch(b){}};var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(tk,s)
  })();
</script>
</head>
<body class="index">

<div class="header">
    <h1><a href="./">James Burke</a></h1>

    <div class="nav">
        <a href="./about/">about</a>
        <a href="./archives/">archives</a>
        <a href="./tags/">tags</a>
        <a href="http://duckduckgo.com/?q=site%3Ajrburke.com">search</a>
            <a href="http://jrburke.com/atom.xml">feed</a>
    </div>
</div>
    <div class="section">
        <div class="sectionHeader">
            <h1 class="postTitle"><a href="2013/07/08/requirejs-2.1.8-released/">RequireJS 2.1.8 Released</a></h1>
            <div class="datetime" data-datetime="2013-07-09T06:55:25.899Z">
                Tue, 09 Jul 2013 06:55:25 GMT
            </div>
        </div>
        <div class="sectionContent">
            <p><a href="http://www.requirejs.org/docs/download.html">RequireJS 2.1.8 is available</a>.</p>

<p>A small release to fix an optimizer issue with <a href="https://github.com/jrburke/r.js/issues/476">parsing config calls for modifications</a>.</p>
        </div>
    </div>
    <div class="section">
        <div class="sectionHeader">
            <h1 class="postTitle"><a href="2013/07/07/requirejs-2.1.7-released/">RequireJS 2.1.7 Released</a></h1>
            <div class="datetime" data-datetime="2013-07-08T05:27:58.444Z">
                Mon, 08 Jul 2013 05:27:58 GMT
            </div>
        </div>
        <div class="sectionContent">
            <p><a href="http://www.requirejs.org/docs/download.html">RequireJS 2.1.7 is available</a>.</p>

<p>The main changes for this release:</p>

<ul>
<li>For xpcshell, the optimizer uses the built in Reflect parser API instead of Esprima. xpcshell, on Linux and Windows in particular, has a constrained stack, and normal Esprima use was not possible. To accommodate this change, some of the parsing approaches used internally by r.js moved away from token scanning to tree walking. The only visible output change you may see is different use of space characters in transformed code.</li>
<li>The source map support was updated to use the new //# syntax as specified by the spec. This change is still making its way through the browsers, so if you need source map or sourceURL support with 2.1.7, you may need to use Firefox Aurora or Chrome Canary channels. The browser support levels should get better in around six weeks time.</li>
</ul>

<p>Full list of changes:</p>

<ul>
<li><a href="https://github.com/jrburke/requirejs/issues?direction=desc&amp;milestone=28&amp;page=1&amp;sort=created&amp;state=closed">Fixed require.js issues</a></li>
<li><a href="https://github.com/jrburke/r.js/issues?milestone=26&amp;page=1&amp;state=closed">Fixed r.js optimizer issues</a></li>
</ul>
        </div>
    </div>
    <div class="section">
        <div class="sectionHeader">
            <h1 class="postTitle"><a href="2013/06/09/browser-driven-arduino-bots/">Browser-driven Arduino bots</a></h1>
            <div class="datetime" data-datetime="2013-06-10T04:11:55.600Z">
                Mon, 10 Jun 2013 04:11:55 GMT
            </div>
        </div>
        <div class="sectionContent">
            <p>Want to help do something awesome? Let's connect some pipes so we can drive an <a href="http://www.arduino.cc/">Arduino</a> using a web browser on a mobile device!</p>

<h2 id="problem">Problem</h2>

<p>I attended the <a href="http://2013.jsconf.us/schedule">node bots hack day at JSConf 2013</a>, and it was really inspiring. We were driving Arduinos via <a href="http://nodejs.org/">Node</a> and <a href="https://github.com/rwldrn/johnny-five/">Johnny-Five</a>.</p>

<p>Right now, the Node program runs on a laptop and communicates with the Arduino over a USB cable connection. There was talk of setting up connections over bluetooth or WiFi instead, but there are a couple of hurdles for it, and I want to take a slightly different path that works with a USB cable connection:</p>

<p>I want to control an Arduino bot by using a <a href="https://developer.mozilla.org/en/docs/Mozilla/Firefox_OS">Firefox OS</a> device connected directly to the bot via USB. Why a Firefox OS device?</p>

<ul>
<li>it is small and relatively inexpensive.</li>
<li>it has a bunch of sensors in it already, all accessible via JavaScript in web apps.</li>
<li>it has a touch screen so it allows for some higher level user interactions.</li>
<li>USB host mode should be available to some of the devices that run Firefox OS.</li>
</ul>

<p>By using a direct USB connection between the device and the Arduino, it would avoid some interference issues with trying to go over a wireless connection. For example, the node copter event was running into congested/conflicting WiFi due to the amount of copters in the room.</p>

<h2 id="pathways">Pathways</h2>

<p>At the hack day, <a href="https://github.com/creationix">Tim Caswell</a> got a Google Chrome <a href="https://github.com/creationix/firmata-chrome">proof of concept</a> working using the <a href="http://developer.chrome.com/apps/serial.html">chrome.serial API</a> available to Chrome apps.</p>

<p>Firefox has the start of a <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=674718">"WebUSB" patch in bug 674718</a>, but the patch is old and there was discussion of difficulty getting it to work for Firefox on Windows.</p>

<p>I tried a <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=674718#c44">naive approach to updating the patch</a>, but ran into trouble because some of the code depended on nsDOMEventTargetWrapperCache which is no longer in the codebase. I do not have enough Gecko code knowledge to know the new mechanism to use. Also, there was a later comment indicating it was unclear how to access USB via the lower level Firefox OS operating system, <a href="https://developer.mozilla.org/en-US/docs/Mozilla/Firefox_OS/Platform/Gonk">Gonk</a>.</p>

<p>So a possible approach to getting to the end goal:</p>

<ul>
<li>Get a real patch that would work for Firefox OS in <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=674718">bug 674718</a>. If it only worked for Firefox OS and did not solve any Windows issues, I would still be happy with that patch. Perhaps the patch could land only enabled for Firefox OS and Android.</li>
<li>Create a JS library that uses the WebUSB patch to do effectively what <a href="https://github.com/voodootikigod/node-serialport">node-serialport</a> does for Node, and what is needed for the firmata library.</li>
<li>Adapt <a href="https://github.com/rwldrn/johnny-five/">Johnny-Five</a> to also run in this new environment.</li>
</ul>

<h2 id="howyoucanhelp">How you can help</h2>

<p>I am very inexperienced with USB and any plumbing needed for it to work, so I am poorly suited to making progress on <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=674718">bug 674718</a>. I believe I confirmed USB host mode is available in the Firefox OS developer phone I am using, so at least on some of the phones, the hardware capability is there.</p>

<h3 id="knowusbandandroidorgonk">Know USB and Android or Gonk?</h3>

<p>If so, then you may be able to sort out the lower levels of the USB patch code in <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=674718">bug 674718</a>.</p>

<p>Firefox OS runs on top of an operating system called <a href="https://developer.mozilla.org/en-US/docs/Mozilla/Firefox_OS/Platform/Gonk">Gonk</a>. Gonk relies on some parts from Android, and Firefox also runs on Android, so if you see a way to get the patch to run in <a href="https://play.google.com/store/apps/details?id=org.mozilla.firefox&amp;hl=en">Firefox for Android</a>, that may be useful too.</p>

<h3 id="knowgeckocode">Know Gecko code?</h3>

<p>If so, then you may be able to freshen up the higher levels of the patch in <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=674718">bug 674718</a> that exposes the WebUSB capability to web apps. If you do not have time to do the patch yourself, perhaps describe the higher level steps to freshen up the patch. One issue: <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=674718#c44">how to adapt the code the depended on nsDOMEventTargetWrapperCache</a>.</p>

<h3 id="knowabetterway">Know a better way?</h3>

<p>I think this is a way to get to a browser-driven Arduinos, but maybe you know of a different way? I could also be missing an important step. My main objective:</p>

<ul>
<li>Develop apps using JS/HTML/CSS that can be loaded on a mobile device.</li>
<li>Control an Arduino with those apps, and allow user interfaces that are touch friendly.</li>
</ul>

<p>I am targeting Firefox OS because I work at Mozilla and believe in the Firefox OS mission. Firefox OS is going to be a great, low cost option for a mobile device. It is also a web-first approach. Driving Arduinos with Firefox OS devices likely means it will work for Firefox on Android, so it opens up the Android platform too.</p>

<p>Using Google Chrome on an Android device might also be a route to take, but I am not sure yet if Chrome apps work on Android (chrome.serial is only available to chrome apps). In my ideal world, we get it working on Firefox (on Firefox OS and Android) and Chrome (on Android) and any JS libraries above the raw USB/serial API should try to target both. You know, the typical web with support for multiple vendors.</p>

<p>It would be fine to hear about approaches use a tiny web server hooked up to the Arduino that receives connections over Bluetooth or WiFi, but I consider that a secondary goal as it involves more moving parts. Definitely interesting, but I really want to focus on hooking up the mobile device directly to the Arduino. The possibility of using the mobile device sensors with the Arduino, and using HTML/JS/CSS to drive the logic is something I really want to see in action.</p>

<p>So, leave a comment via the link below, or if you have practical steps for <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=674718">bug 674718</a>, comment in that bug.</p>
        </div>
    </div>
    <div class="section">
        <div class="sectionHeader">
            <h1 class="postTitle"><a href="2013/06/05/volo-0.3.0-released/">volo 0.3.0 released</a></h1>
            <div class="datetime" data-datetime="2013-06-06T04:19:32.680Z">
                Thu, 06 Jun 2013 04:19:32 GMT
            </div>
        </div>
        <div class="sectionContent">
            <p>A new release for <a href="http://volojs.org">volo</a> is out that adds the following:</p>

<ul>
<li><strong>Colorized output</strong>: just a bit of color. Nothing crazy. Also the markdown help files are now a bit prettier thanks to an approach I first about from <a href="https://github.com/gtanner">Gord Tanner</a>.</li>
<li><strong>volo.ignore</strong>: For your library, you can set a <a href="https://github.com/volojs/volo/wiki/Library-best-practices#wiki-voloignore">volo.ignore</a> property for files/directories that should not be part of the installed dependency.</li>
<li><strong>remove command</strong>: There is now an explicit remove command. It will remove a dependency from the volo.dependencies in package.json and remove the file(s) on disk.</li>
<li><strong>update command</strong>: Just an alias to <code>add -f</code>.</li>
</ul>

<p>Some internal dependencies were updated. One of them was <a href="https://github.com/kriskowal/q">Q</a>, going from a 0.8 version to a 0.9 version. As part of that update, some of its APIs changed, so if you <code>v.require('q')</code> in your volofile, you may need to update your code. The only changes I needed to do internally:</p>

<ul>
<li><code>q.call</code> is now <code>q.fcall</code>. If you need to support older and newer volo installs, you can use <code>q.fcall || q.call)</code> in your volofiles to be forward and backward compatible.</li>
<li><code>q.end</code> is now <code>q.done</code>.</li>
</ul>

<p>See the full set of <a href="https://github.com/kriskowal/q/blob/master/CHANGES.md#090">0.9 Q API</a> changes.</p>

<p><a href="https://github.com/volojs/volo/issues?milestone=13&amp;page=1&amp;state=closed">Full list of fixed volo 0.3.0 issues</a>.</p>

<p>To upgrade to the latest release:</p>

<pre><code>npm install -g volo
</code></pre>
        </div>
    </div>
    <div class="section">
        <div class="sectionHeader">
            <h1 class="postTitle"><a href="2013/05/10/requirejs-2.1.6-released/">RequireJS 2.1.6 Released</a></h1>
            <div class="datetime" data-datetime="2013-05-11T04:16:17.026Z">
                Sat, 11 May 2013 04:16:17 GMT
            </div>
        </div>
        <div class="sectionContent">
            <p><a href="http://www.requirejs.org/docs/download.html">RequireJS 2.1.6 is available</a>.</p>

<p><a href="http://www.requirejs.org/docs/optimization.html#sourcemaps">Source map support</a> has been expanded. Previously, it was just supported for going from minified, bundled code to the unminified, bundled code. If <strong>optimize: 'uglify2'</strong> is used, it will now go back to the separated, unbundled files.</p>

<p>Source map support is still considered experimental though, so you may find bugs. If you find one, file an <a href="https://github.com/jrburke/r.js/issues">r.js issue</a>, ideally with a test case.</p>

<p>Full list of changes for 2.1.6:</p>

<ul>
<li><a href="https://github.com/jrburke/requirejs/issues?direction=desc&amp;milestone=27&amp;page=1&amp;sort=created&amp;state=closed">Fixed require.js issues</a></li>
<li><a href="https://github.com/jrburke/r.js/issues?milestone=25&amp;page=1&amp;state=closed">Fixed r.js optimizer issues</a></li>
</ul>
        </div>
    </div>
</body>
</html>
